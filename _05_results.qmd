# Results

##### Research and Identification of Core Strategies


Using the analysis of the strategy-tagged features above, we moved forward with the following set of indicators to analyze:

independent variables = `new_listings`, `inventory`, `num_housing_units`,
`median_income`, `population`, `property_tax`, `homes_sold`, `days_on_market`

dependent variable = `median_sale_price`

**Scatter Plot Samples**

What we found early on in the analysis was that there is a big difference in how features respond to `median_sale_prices`
depending on the county density.  For example, the following scatter plot clusters are from Washington and Wheeler Counties.
This is a trend that will show up all through the analysis.

::: {#fig-scatter layout-ncol=2}
![Washington County Scatterplots](images/washington_scatter.png){#wash-scatter width=300}

![Wheeler County Scatterplots](images/wheeler_scatter.png){#wheeler-scatter width=300}
:::


**Trend Plots and MK numbers**

Trend analysis for time series is interesting to plot.  We found out a lot about this data by plotting this data over time.  You can see in the 
trends below that the densely populated counties (top 2 graphs) are trend in a similar manner, but differ from the sparsely populated counties
(bottom 2 graphs).

![Home Sale Price Trend in Densely Populated vs Sparsely Populated Oregon Counties](images/county_sales.png){#fig-county-sales}

Trends can also show us where housing payments began to become unaffordable, like in the figure below.

![housing_unaffordability.png](images/housing_unaffordability.png){#fig-unaffordable-wash}

**Homes Sold Feature Significance**

After the home sold feature significance study, we narrowed the features to:

| feature             | percent of home sales represented |
|---------------------|-----------------------------------|
| `inventory`         | 99.91256033101263                 |
| `num_housing_units` | 99.984587972013                   |
| `median_income`     | 99.984587972013                   |
| `population`        | 99.1469914305979                  |
| `property_tax`      | 99.984587972013                   |
| `days_on_market`    | 99.81316847705574                 |


**Linear Regression - linear plot samples for populated and unpopulated counties**

Washington County Results - heavily populated county

* Independent Variable Combination: ['num_housing_units', 'days_on_market', 'inventory']
* Evaluation Statistics: R^2: 0.9550268107703429, MAE: 18.991051374287636, RMSE: 24.584835761694823
* Anderson-Darling test for residuals: below 0.05 generally means non-normal: 0.060124359532653535
* Coefficients: 
  + `num_housing_units` = 84.85562076, 
  + `days_on_market` = -8.46017593, 
  + `inventory` = -1.06431453

This coefficient for `num_housing_units` a strong indicator that if you increase housing units, median house prices will rise.
This is surprising given that a lot of the focus is on building more housing at a faster pace.

Wheeler County Results - sparsely populated county

* Independent Variable Combination: ['num_housing_units', 'days_on_market', 'inventory']
* Evaluation Statistics: R^2: 0.02140717912691359, MAE: 134.56532825628832, RMSE: 185.9532651361748
* Anderson-Darling test for residuals: below 0.05 generally means non-normal: 2.099955001334869e-12
* Coefficients: 
  + `num_housing_units` = 18.18540814, 
  + `days_on_market`= 30.85635937, 
  + `inventory` = -29.20292623

Findings:

1.  Regression fits well to densely populated counties with a median sale price target.
2.  Sparsely populated counties are best modeled by collected data to median sale prices.


**Random Forest Model - Feature importances, decision tree, table of results** 

Model test statistics for Washington County:

| Metric                                | Value                 |
|---------------------------------------|-----------------------|
| Mean Absolute Error (MAE)             | 7.522343744087813     |
| Mean Squared Error (MSE)              | 104.32109361078466    |
| Root Mean Squared Error (RMSE)        | 104.32109361078466    |
| Mean Absolute Percentage Error (MAPE) | 0.01931186065104155   |
| Explained Variance Score              | 0.9885975711129124    |
| Max Error                             | 46.91661360861349     |
| Mean Squared Log Error                | 0.0006227441802917824 |
| Median Absolute Error                 | 6.501995768773753     |
| R^2                                   | 0.9885829946465465    |
| Mean Poisson Deviance                 | 0.2447723229456236    |
| Mean Gamma Deviance                   | 0.0006260260341751169 |

Model test statistics for Wheeler County:

| Metric                                | Value               |
|---------------------------------------|---------------------|
| Mean Absolute Error (MAE)             | 74.479156903197     |
| Root Mean Squared Error (RMSE)        | 8274.479156903197   |
| Mean Absolute Percentage Error (MAPE) | 0.6771181405050725  |
| Explained Variance Score              | 0.6352815417171738  |
| Max Error                             | 321.35144577975683  |
| Mean Squared Log Error                | 0.3436727515864253  |
| Median Absolute Error                 | 67.40806586081992   |
| R^2                                   | 0.6351549430802184  |
| Mean Poisson Deviance                 | 40.06686486557459   |
| Mean Gamma Deviance                   | 0.27567274349559723 |

Random Forest Feature Importance:

![Random Forest Feature Importance](images/random_forest_permutation_importance.png){#fig-rf-feature-imp}

Resultant Forest Decsion Tree:

![Random Forest Decision Tree](images/random_forest-tree.png){#fig-rf-decision-tree}